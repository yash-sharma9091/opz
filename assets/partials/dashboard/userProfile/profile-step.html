<md-dialog aria-label="step">
  <form ng-cloak class="frmBx" name="profileupdate" novalidate>
    <md-dialog-content >
     <md-button ng-if="step<=4"  class="md-icon-button closeIcon" ng-click="cancel()" 
      ng-hide="socialUser">
        <md-icon  aria-label="Close" >close</md-icon>
     </md-button>

     <div ng-if="step==5" class="md-dialog-content">
           <div class="alert text-center alert-success">
              <p> Your profile has been successfully updated</p>
           </div>
         <md-button  
            aria-label="finish"
            ng-click="cancel()"
            class="md-raised md-primary logpopup-Btn fr " 
            > Finish 
        </md-button>   
     </div>
    <div ng-if="step<=4">

  	 <!--step header-->
      <h2 class="LoginHd">Step {{step}}</h2>
      <div class="stepNumb">
        <ul class="clearfix">
          <li><span  ng-class="{'current':step==1,'active':step>=1}">1</span></li>
          <li><span  ng-class="{'current':step==2,'active':step>=2}">2</span></li>
          <li><span  ng-class="{'current':step==3,'active':step>=3}">3</span></li>
          <li><span  ng-class="{'current':step==4,'active':step>=4}">4</span></li>
        </ul>

      </div>
       <hr>


 	<!--end step header-->

    <div class="md-dialog-content">
    <p class="infoAlert" ng-hide="step==4"> All Fields marked with <red>*</red> are mandatory. </p>
    <p class="infoAlert" ng-show="step==4">Below field are<b>  optional </b></p>
  	 <div class="alert {{alert.type}}" ng-if="alert">
          <p>
          <md-icon ng-if="alert.type=='alert-danger'">error_outline</md-icon>
           {{alert.message}}
           </p>
    </div>

<!--step-1-->
<div class="stepFrmBx" ng-if="step==1" >
      <!--username -->
  <md-input-container ng-if="!socialUser" >
            <label>Username</label>
            <input  name="fullName" 
                    readonly 
                    required 
                    type="text"
                    ng-model="user.fullName">
            <div ng-messages="profileupdate.fullName.$error">
              <div ng-message="required">Full name is required.</div>
            </div>
</md-input-container>

  <md-input-container class="md-block margin-top25 loaderText" ng-if="socialUser">
        <md-progress-circular  ng-if="checking"
                   md-mode="indeterminate" 
                   
                   md-diameter="15px">
                   </md-progress-circular>
            <label>User Name (6 - 10 characters ) </label>
            <input  name="username" 
                    required 
                    type="text"
                    minlength="6"
                    md-maxlength="10"
                    ng-keyup="checkUsrname(user.username,profileupdate)"
                    ng-model="user.username" 
                   >
          <div ng-messages="profileupdate.username.$error">
          <div ng-message="required">Username is required.</div>
          <div ng-message="minlength">Enter username between 6 to 10 chnarcter.</div>
          <div ng-message="md-maxlength">Enter username between 6 to 10 chnarcter.</div>
          <div ng-message="maxlength">Enter username between 6 to 10 chnarcter.</div>

          <div ng-message="username">
           {{user.username}} is already taken, 
              please choose a different name
          </div>
         
            
      </div>
  
        <div class="clearfix"></div>
  </md-input-container>

          <div class="steplbl">My Gender<red>*</red></div>
 <div class="steptopBx">
          <!--gender -->
			  <md-radio-group ng-model="user.gender" ng-required="true">

				<md-radio-button value="male" class="md-primary">
				<md-icon class="blueClr">person</md-icon>Male
				</md-radio-button>

				<md-radio-button value="female" class="md-primary">
				<md-icon class="pinkClr">person</md-icon> Female
				</md-radio-button>

				
			</md-radio-group>

          
</div>
          <div class="steplbl">Birth Date<p> <span>(used to calculate age and birth date  will not be revealed)<red>*</red></span> </p></div>
          <div class="stepdobBx clearfix">
        <div class="Dob-L">
           <md-input-container>
              <md-select 
                  ng-model="user.dob.day" required name="day"
              			placeholder="Select Day" class="md-no-underline sechInp">
                    <md-option value="">-- Select Day --</md-option>
											<md-option value="1">01</md-option>
											<md-option value="2">02</md-option>
											<md-option value="3">03</md-option>
											<md-option value="4">04</md-option>
											<md-option value="5">05</md-option>
											<md-option value="6">06</md-option>
											<md-option value="7">07</md-option>
											<md-option value="8">08</md-option>
											<md-option value="9">09</md-option>
											<md-option value="10">10</md-option>
											<md-option value="11">11</md-option>
											<md-option value="12">12</md-option>
											<md-option value="13">13</md-option>
											<md-option value="14">14</md-option>
											<md-option value="15">15</md-option>
											<md-option value="16">16</md-option>
											<md-option value="17">17</md-option>
											<md-option value="18">18</md-option>
											<md-option value="19">19</md-option>
											<md-option value="20">20</md-option>
											<md-option value="21">21</md-option>
											<md-option value="22">22</md-option>
											<md-option value="23">23</md-option>
											<md-option value="24">24</md-option>
											<md-option value="25">25</md-option>
											<md-option value="26">26</md-option>
											<md-option value="27">27</md-option>
											<md-option value="28">28</md-option>
											<md-option value="29">29</md-option>
											<md-option value="30">30</md-option>
											<md-option value="31">31</md-option>
                </md-select>
              <div class="errors" ng-messages="profileupdate.day.$error">
                <div ng-message="required">Day is required</div>
              </div>
          </md-input-container>
      </div>
      <div class="Dob-L">
          <md-input-container>
              <md-select 
              ng-model="user.dob.month" name="month"
              placeholder="Select Month"  required
              class="md-no-underline sechInp">
                  <md-option value="">-- Select Month --</md-option>
                  <md-option value="1">January</md-option>
                  <md-option value="2">February</md-option>
                  <md-option value="3">March</md-option>
                  <md-option value="4">April</md-option>
                  <md-option value="5">May</md-option>
                  <md-option value="6">June</md-option>
                  <md-option value="7">July</md-option>
                  <md-option value="8">August</md-option>
                  <md-option value="9">September</md-option>
                  <md-option value="10">October</md-option>
                  <md-option value="11">November</md-option>
                  <md-option value="12">December</md-option>
              </md-select>
                <div class="errors" ng-messages="profileupdate.month.$error">
                    <div ng-message="required">Month is required</div>
                </div>
          </md-input-container>
      </div>
            <div class="Dob-R">
            <md-input-container>
              <md-select ng-model="user.dob.year" name="year" 
              required 
              placeholder="Select Year" 
              class="md-no-underline sechInp">
              <md-option value="">-- Select Year --</md-option>
                <md-option ng-repeat="x in years" value="{{x}}">{{x}}</md-option>
                 
                </md-select>
                 <div class="errors" ng-messages="profileupdate.year.$error">
                  <div ng-message="required">Year is required</div>
                </div>
              </md-input-container>
            </div>
            </div>

            
      
        </div>
        <!--step2-->

        <div class="stepFrmBx" ng-if="step==2">

         

        <md-input-container>
            <label>Seeking to Exchange With</label>
            
            <md-select  ng-model="user.exchange" 
            md-on-close="seeking_exchange(user.exchange)" 
            placeholder="Seeking to Exchange With" required name="exchange" class="md-no-underline">
                <md-option value="">-- Seeking to Exchange With --</md-option>
                <md-option value="male">Male</md-option>
                <md-option value="female">Female</md-option>
                <md-option value="both">Both</md-option>
            </md-select>
            <div class="errors" ng-messages="profileupdate.exchange.$error">
                  <div ng-message="required">Seeking  exchange is required</div>
            </div>

        </md-input-container>

         <md-input-container>
            <label>Type of massage that interests me </label>
            
            <md-select md-on-close="interest(user.interests)"   ng-model="user.interests" required name="interests" class="md-no-underline">
                <md-option value="">-- Type of massage that interests me --</md-option>
                <md-option value="therapeutic">Therapeutic</md-option>
                <md-option value="sensual">Sensual</md-option>
                <md-option value="both">Both</md-option>
            </md-select>
            <div class="errors" ng-messages="profileupdate.interests.$error">
                  <div ng-message="required">Type of massage that interests is required</div>
            </div>

        </md-input-container>

         <md-input-container>
            <label>My Body Work Level</label>
           
            <md-select  ng-model="user.levelTypeOne" required name="workLevel" class="md-no-underline">
                <md-option value="">-- My Body Work Level --</md-option>
                <md-option value="professional_cmt">Professional/CMT</md-option>
                <md-option value="student"> Student </md-option>
                <md-option value="aficionado">Aficionado and/or Amateur</md-option>
            </md-select>
            <div class="errors" ng-messages="profileupdate.workLevel.$error">
                  <div ng-message="required">Body work level is required</div>
            </div>

        </md-input-container>
        
          <div class="md-block" ng-if="user.levelTypeOne=='professional_cmt'">
          <div class="steptopBx"> Service Type Offered
          <div class="clearfix"></div>

          <md-radio-group ng-model="user.professionalType" 
          ng-required="true"    
          ng-init="user.professionalType=!user.professionalType?'free':user.professionalType">
          <md-radio-button value="free"  > Exchange Massage </md-radio-button>
          <md-radio-button value="paid">  Paid Massage  </md-radio-button>
          <md-radio-button value="both">  Both  </md-radio-button>
          </md-radio-group>
          </div>
          </div>
        </div>

        <!--step3-->
        <div class="stepFrmBx" ng-if="step==3">
         

          <md-input-container>
              <label>My Location</label>
              <input 
                type="text" 
                required 
                places-auto-complete 
                name="address" 
                placeholder="Type your location and select from the suggessted list" 
                class="countryInp" 
                ng-model="user.address" 
                types="['geocode']" 
                ng-keyup="CheckFullAddress($event,user)"
                on-place-changed="placeChanged()">

              <div ng-messages="profileupdate.address.$error">
              <div ng-message="required">Full address is  required.</div>
              </div>
          </md-input-container>
          <!--map view-->
           <div class="clearfix"></div>
          <div ng-if="fulladdress" class="fullAdd"> 
              <div class="col-sm-4"> <span>Country:</span>{{fulladdress.country || 'N/A'}}  </div>
              <div class="col-sm-4"> <span>State: </span>  {{fulladdress.state || 'N/A'}}</div>
              <div class="col-sm-4"> <span>City: </span>  {{fulladdress.city || 'N/A'}}</div>
          </div>
          <div class="clearfix"></div> 
          
          <p ng-bind-html="place.adr_address"  class="hideEle"></p>
          <div class="map-modal" >
               <ng-map 
                        ng-if="getmap(user.latitude,user.longitude)" zoom="11"
                          center="{{getmap(user.latitude,user.longitude)}}">
                        <marker position="{{getmap(user.latitude,user.longitude)}}"> </marker>
                    </ng-map>
           </div>
        </div>

        <!--step4-->
        <div class="stepFrmBx" ng-if="step==4">
      <md-input-container>
            <label>Styles of massage that I prefer to give</label>
            
            <md-select 
                  multiple 
                  data-md-container-class="multiDropdown"
                  ng-model="user.massageStyles" 
                  placeholder="Select Your Option" 
                  md-on-close="setMassageStyle(user.massageStyles)"
                  name="massageStyles" class="md-no-underline">
                <md-option ng-value="list" ng-repeat="list in listType">
                  {{list}}
                  </md-option>
                  
            </md-select>
            <div class="errors" ng-messages="profileupdate.massageStyles.$error">
                  <div ng-message="required">Styles of massage is required</div>
            </div>

        </md-input-container>
            <md-input-container>
            <label>Select Body Type</label>

            <md-select  ng-model="user.bodyTypeOne" 

            placeholder="Seeking to Exchange With"  name="bodyTypeOne" class="md-no-underline">
              <md-option value="">-- Select Body Type --</md-option>
              <md-option value="slim_petite">Slim Petite</md-option>
              <md-option value="average">Average</md-option>
              <md-option value="gym_fit">Gym Fit</md-option>
              <md-option value="muscular">Muscular</md-option>
              <md-option value="few_pounds_over_average">A Few Pounds Over Average</md-option>
              <md-option value="large">Large</md-option>
            </md-select>
            <div class="errors" ng-messages="profileupdate.bodyTypeOne.$error">
                <div ng-message="required">Body Type is required</div>
            </div>

            </md-input-container>

         <md-input-container class="md-block">
          <label>About Me</label>
          <textarea 
          class="textArea"
              name="message"
              ng-model="user.aboutme" 
               rows="5" md-select-on-focus>
           </textarea>
         
          </md-input-container>
       

        </div>


        <div class="clearfix nextback" ng-hide="step==5">
         <!--button step-->
         <md-button class="md-raised greyBg logpopup-Btn fl"
         	 ng-click="stepBack()" ng-hide="step==1">
           Back
        </md-button>
         <!--next button-->

         <md-button  
            type="submit"
            aria-label="submit"
            ng-click="updateProfile(profileupdate,user)"
            class="md-raised md-primary logpopup-Btn fr"  
            ng-class="{' pull-right':step!=1,'center-btn':step==1}"
            >   
              <span ng-if="step<4">Next</span>
              <span ng-if="step==4">Submit</span>

            </md-button> 

         </div>
      </div>

      </div>
    </md-dialog-content>

    
  </form>
</md-dialog>
